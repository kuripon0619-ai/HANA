(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{4832:(e,a,s)=>{Promise.resolve().then(s.bind(s,4901))},4901:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});var l=s(5155),r=s(2115);function t(){let[e,a]=(0,r.useState)({name:"",phone:"",email:"",preferredDate:"",preferredTime:"",menu:"",notes:""}),[s,t]=(0,r.useState)(null),[n,d]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),m=s=>{a({...e,[s.target.name]:s.target.value})},o=async e=>{e.preventDefault(),c(!0);try{d(!0)}finally{c(!1)}},p=async()=>{d(!1),c(!0),t(null);let a=u();if(a.length>0){t(a.join("\n")),c(!1);return}try{let a=await fetch("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,phone:e.phone,email:e.email,preferredDate:e.preferredDate,preferredTime:"".concat(e.preferredTime,":00"),menu:e.menu,notes:e.notes})});if(a.ok)alert("予約が完了しました");else{let e=await a.json();alert("エラー: ".concat(e.error))}}catch(e){alert("サーバーエラーが発生しました")}finally{c(!1)}},u=()=>{let a=[];return/^[0-9-]+$/.test(e.phone)||a.push("電話番号は数字とハイフンのみ使用できます"),new Date(e.preferredDate)<new Date(new Date().toDateString())&&a.push("予約日は今日以降の日付を選択してください"),a};return(0,l.jsxs)("form",{onSubmit:o,className:"max-w-md mx-auto p-6 space-y-4 bg-white rounded-lg shadow-md",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"お名前"}),(0,l.jsx)("input",{type:"text",name:"name",className:"w-full px-3 py-2 border rounded-md",placeholder:"山田 太郎",onChange:m,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"電話番号"}),(0,l.jsx)("input",{type:"tel",name:"phone",className:"w-full px-3 py-2 border rounded-md",placeholder:"000-0000-0000",onChange:m,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"メールアドレス"}),(0,l.jsx)("input",{type:"email",name:"email",className:"w-full px-3 py-2 border rounded-md",placeholder:"example@example.com",onChange:m,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"予約日"}),(0,l.jsx)("input",{type:"date",name:"preferredDate",className:"w-full px-3 py-2 border rounded-md",onChange:m,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"予約時間"}),(0,l.jsxs)("select",{name:"preferredTime",className:"w-full px-3 py-2 border rounded-md",onChange:m,required:!0,children:[(0,l.jsx)("option",{value:"",children:"時間を選択"}),["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"希望メニュー"}),(0,l.jsxs)("select",{name:"menu",className:"w-full px-3 py-2 border rounded-md",onChange:m,required:!0,children:[(0,l.jsx)("option",{value:"",children:"メニューを選択"}),["カット","カラー","パーマ","トリートメント","ヘッドスパ","その他（希望を備考欄にお書きください）"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"備考"}),(0,l.jsx)("textarea",{name:"notes",className:"w-full px-3 py-2 border rounded-md",placeholder:"例: アレルギーあり",onChange:m})]}),s&&(0,l.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:s}),(0,l.jsx)("button",{type:"submit",disabled:i,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:i?"送信中...":"予約する"}),n&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"予約内容の確認"}),(0,l.jsxs)("p",{children:["名前: ",e.name]}),(0,l.jsxs)("p",{children:["日時: ",e.preferredDate," ",e.preferredTime]}),(0,l.jsxs)("p",{children:["メニュー: ",e.menu]}),(0,l.jsxs)("div",{className:"mt-4 space-x-4",children:[(0,l.jsx)("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"確認"}),(0,l.jsx)("button",{onClick:()=>d(!1),className:"bg-gray-300 px-4 py-2 rounded",children:"キャンセル"})]})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,684,358],()=>a(4832)),_N_E=e.O()}]);